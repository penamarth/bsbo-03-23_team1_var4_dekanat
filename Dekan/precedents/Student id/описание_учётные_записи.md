Описания определяются для системных операций (system operations), входящих в открытый интерфейс системы.

Ссылки:
- Прецеденты: Управление учетными записями пользователей → Управление ролями
- Диаграмма последовательности: Управление ролями

Операция: createRole(name: string, permissions: PermissionCode[])
Предусловия:
- Администратор системы аутентифицирован и авторизован.
- Входные данные корректны по формату.
  Постусловия:
- Создан экземпляр role класса Role (создание экземпляра).
- Атрибуту role.name присвоено значение name (модификация атрибута).
- Для каждого кода из permissions создан экземпляр rp класса RolePermission (создание экземпляров).
- Каждый экземпляр rp связан с role и соответствующим экземпляром класса Permission по коду (формирование ассоциаций).
- Зафиксирована запись аудита о создании роли (аудит/логирование).

Операция: updateRole(roleId: RoleID, newName?: string, addPerms?: PermissionCode[], removePerms?: PermissionCode[])
Предусловия:
- Администратор системы аутентифицирован и авторизован.
- Существует экземпляр role класса Role с идентификатором roleId.
- Если newName задан, имя не конфликтует с существующими ролями.
- Все значения в addPerms/removePerms соответствуют существующим экземплярам Permission.
  Постусловия:
- Если newName задан, атрибуту role.name присвоено значение newName (модификация атрибута).
- Для каждого кода из addPerms создан экземпляр rp класса RolePermission и связан с role и Permission (создание и формирование ассоциаций).
- Для каждого кода из removePerms удалена соответствующая связь RolePermission (удаление ассоциаций/экземпляров).
- Зафиксирована запись аудита об изменении роли (аудит/логирование).

Операция: deleteRole(roleId: RoleID)
Предусловия:
- Администратор системы аутентифицирован и авторизован.
- Существует экземпляр role класса Role с идентификатором roleId.
- Для role отсутствуют назначения пользователям (нет экземпляров userRole класса UserRole, связанных с role).
  Постусловия:
- Удалены все экземпляры rp класса RolePermission, связанные с role (удаление ассоциаций/экземпляров).
- Удалён экземпляр role класса Role (удаление экземпляра).
- Зафиксирована запись аудита об удалении роли (аудит/логирование).

Операция: assignRole(userId: UserID, roleId: RoleID)
Предусловия:
- Администратор системы аутентифицирован и авторизован.
- Существуют экземпляры user класса User (userId) и role класса Role (roleId).
- Назначение данной роли пользователю отсутствует (отсутствует экземпляр userRole с парой (userId, roleId)).
  Постусловия:
- Создан экземпляр userRole класса UserRole, связанный с экземплярами user и role (создание экземпляра и формирование ассоциаций).
- Во внешней Службе авторизации аннулированы активные сессии пользователя user (внешний побочный эффект).
- Зафиксирована запись аудита о назначении роли пользователю (аудит/логирование).

Операция: revokeRole(userId: UserID, roleId: RoleID)
Предусловия:
- Администратор системы аутентифицирован и авторизован.
- Существуют экземпляры user класса User (userId) и role класса Role (roleId).
  Постусловия:
- Если существовал экземпляр userRole класса UserRole с парой (userId, roleId), он удалён (удаление экземпляра/ассоциации).
- Во внешней Службе авторизации аннулированы активные сессии пользователя user (внешний побочный эффект).
- Зафиксирована запись аудита о снятии роли с пользователя (аудит/логирование).